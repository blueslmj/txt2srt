# UI界面使用指南

本项目提供了两种UI界面供您选择：

## 🌐 方案1：Gradio Web界面（推荐）

### 特点
- ✨ 现代化、美观的Web界面
- 🖱️ 支持拖拽上传文件
- 📱 响应式设计，支持移动端
- 🎨 精美的UI组件和主题
- 📊 实时预览和进度显示
- 🌐 可在浏览器中运行

### 安装
确保已运行 `setup.bat` 安装了所有依赖（包括gradio）

### 启动方式

**方法1：使用快捷脚本（推荐）**
```bash
start_ui.bat
```

**方法2：手动启动**
```bash
venv\Scripts\activate
venv\Scripts\python txt2srt_ui.py
```

### 使用步骤

1. **启动后会自动打开浏览器**，访问 `http://127.0.0.1:7860`

2. **上传音频文件**
   - 点击"上传音频文件"区域
   - 选择你的音频文件（支持 MP3, WAV, M4A, FLAC, OGG 等）

3. **提供文本内容**
   - 方式A：在"直接输入"标签页输入文本
   - 方式B：在"上传文件"标签页上传 .txt 文件

4. **调整设置**
   - 选择模型大小（Base=快速，Small/Medium=更准确）
   - 选择语言（zh=中文，en=英文）

5. **点击"🚀 开始处理"**
   - 等待处理完成
   - 查看字幕预览
   - 下载生成的SRT文件

### 界面预览

```
┌─────────────────────────────────────────────────────────┐
│          🎵 音频-文本对齐工具                            │
│     自动将音频和文本对齐，生成SRT字幕文件                │
├─────────────────────────────────────────────────────────┤
│ 📥 输入                     │ 📤 输出                    │
│                             │                            │
│ 1️⃣ 上传音频文件             │ 处理状态:                  │
│ [  拖拽或点击上传  ]        │ ⏳ 正在处理...             │
│                             │                            │
│ 2️⃣ 提供文本内容             │ 字幕预览:                  │
│ ┌─────────┬─────────┐      │ 1                          │
│ │📝 直接输入│📁 上传文件│      │ 00:00:00,000 --> ...       │
│ └─────────┴─────────┘      │ 这是第一句字幕...          │
│ [文本输入框...]            │                            │
│                             │ 📥 下载SRT文件             │
│ ⚙️ 设置                     │ [  下载按钮  ]             │
│ 模型大小: [Base ▼]         │                            │
│ 语言: [zh ▼]               │                            │
│                             │                            │
│    [🚀 开始处理]            │                            │
└─────────────────────────────────────────────────────────┘
```

---

## 🖥️ 方案2：Tkinter桌面界面

### 特点
- 🖥️ 原生桌面应用界面
- 📦 无需浏览器，独立运行
- 💾 无需额外安装Gradio依赖
- 📋 详细的日志输出窗口
- 🎯 简洁实用的传统界面

### 安装
只需基础依赖即可（不需要gradio）

### 启动方式

**方法1：使用快捷脚本（推荐）**
```bash
start_tkinter_ui.bat
```

**方法2：手动启动**
```bash
venv\Scripts\activate
venv\Scripts\python txt2srt_tkinter_ui.py
```

### 使用步骤

1. **启动后会打开桌面窗口**

2. **选择文件**
   - 点击"音频文件"旁的"浏览..."按钮
   - 点击"文本文件"旁的"浏览..."按钮
   - （可选）指定输出文件路径

3. **调整设置**
   - 选择模型大小（base, small, medium等）
   - 选择语言（zh, en, auto等）

4. **开始处理**
   - 点击"🚀 开始处理"按钮
   - 在日志窗口查看处理进度
   - 完成后会弹出提示窗口

### 界面预览

```
┌────────────────────────────────────────────────────────┐
│              🎵 音频-文本对齐工具                       │
│        自动将音频和文本对齐，生成SRT字幕文件            │
├────────────────────────────────────────────────────────┤
│ 📥 输入文件                                             │
│                                                         │
│ 音频文件: [___________________________] [浏览...]      │
│ 文本文件: [___________________________] [浏览...]      │
│ 输出文件: [___________________________] [浏览...]      │
├────────────────────────────────────────────────────────┤
│ ⚙️ 设置                                                 │
│                                                         │
│ 模型大小: [base ▼] (base=快速, medium=准确)            │
│ 语言:     [zh ▼]   (zh=中文, en=英文, auto=自动)       │
├────────────────────────────────────────────────────────┤
│         [🚀 开始处理]    [🗑️ 清空]                      │
│                                                         │
│         [========进度条========]                        │
├────────────────────────────────────────────────────────┤
│ 📋 处理日志                                             │
│ ┌────────────────────────────────────────────────────┐ │
│ │ 🚀 开始处理...                                      │ │
│ │ 📁 音频文件: audio.mp3                              │ │
│ │ ⏳ 正在使用Whisper模型进行语音识别...               │ │
│ │ ✅ 语音识别完成！识别到 25 个段落                   │ │
│ │ ✅ SRT文件已生成                                    │ │
│ └────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────┘
```

---

## 🔄 两种界面对比

| 特性 | Gradio Web界面 | Tkinter桌面界面 |
|------|----------------|-----------------|
| 界面风格 | 现代化、美观 | 传统桌面风格 |
| 运行环境 | 需要浏览器 | 独立运行 |
| 依赖 | 需要gradio | 无额外依赖 |
| 文件上传 | 支持拖拽 | 文件选择对话框 |
| 移动端 | 支持 | 不支持 |
| 网络分享 | 支持 | 不支持 |
| 资源占用 | 稍高 | 较低 |
| 启动速度 | 稍慢 | 快 |
| 推荐场景 | 日常使用、演示 | 简单快速使用 |

## 💡 选择建议

- **推荐使用 Gradio Web界面** 如果你：
  - 想要更美观的界面
  - 需要在不同设备上使用
  - 喜欢现代化的交互方式

- **使用 Tkinter桌面界面** 如果你：
  - 不想安装额外的依赖
  - 喜欢传统的桌面应用
  - 需要更快的启动速度

## 🛠️ 故障排除

### Gradio界面无法启动
```bash
# 确保已安装gradio
venv\Scripts\pip install gradio>=4.0.0

# 检查端口是否被占用
# 可以修改 txt2srt_ui.py 中的端口号（默认7860）
```

### Tkinter界面显示异常
```bash
# Windows上Tkinter通常已随Python安装
# 如果有问题，尝试重新安装Python并勾选"tcl/tk"选项
```

### 处理速度慢
- 使用更小的模型（tiny或base）
- 考虑使用GPU加速（需要CUDA）
- 分段处理长音频

## 📞 技术支持

如有问题，请参考主README.md或查看示例代码。

